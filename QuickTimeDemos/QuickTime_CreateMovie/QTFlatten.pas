unit QTFlatten;interface//uses Movies,QTUtilities,CreateMovie,ComFramework;implementation(*************************************************************                                                           **							    **  QTSave_FlattenMovie					    **  Save and flatten a movie resource into a file.	    **                                       		    **                                                           **************************************************************)function QTSave_FlattenMovie (Movie theMovie, FSSpec *myFile):OSErr;var aMovie:Movie;    myErr:OSErr;begin	aMovie := NULL;	myErr := noErr;	// The FlattenMovieData function creates a new movie file and creates a new movie	// that contains all of its movie data.	// NOTE: Unlike the FlattenMovie, this function does not add the new movie resource	// to the new movie file. Instead, the FlattenMovieData function returns the new	// movie to your application. Your application must dispose of the returned movie.		aMovie := FlattenMovieData(theMovie,							(* movie specifier *)					   flattenAddMovieToDataFork |		(* moive flatten flags *)					   flattenForceMovieResourceBeforeMovieData,					   myFile,							(* FSSpec for creted movie *)					   FOUR_CHAR_CODE('TVOD'),			(* creator *)					   smSystemScript, 					(* script tag *)					   createMovieFileDeleteCurFile |	(* creation flags *)					   createMovieFileDontCreateResFile);				myErr = GetMoviesError();		CheckError( myErr, 'FlattenMovie error' );				if (aMovie <> nil) then			DisposeMovie(theMovie);	result:=myErr;end;

end.